<!DOCTYPE html>
<html>
  <head>
    <title>smooth loader</title>
    <script>
        // perform our complicated JS while we load
        function churn() {
          // burn some CPU time
          console.log('flail!');
          var start = new Date().getTime();
          // hitch for 100ms
          while(new Date().getTime() - start < 100) {
            ;
            }
          }

        // Churn baby churn!
        window.setInterval(churn, 400);

        // Run the animation via CSS
        function startCSS() {
          var el = document.querySelector('img');
          el.addEventListener('webkitAnimationEnd', function() {
            el.style.webkitTransform = "translateX(0%)";
          });
          el.style.webkitAnimationName = 'swipy';
        }

    </script>
    <style>
        img {
          -webkit-animation-duration: 5s;
          -webkit-transform: translateX(-100%);
          -webkit-animation-timing-function: linear;
          width: 100%;
        }
        @-webkit-keyframes swipy {
            from {
                -webkit-transform: translateX(-100%);
            }
            to {
                -webkit-transform: translateX(0%);
            }
          }
    </style>
    </head>
  <body style="-webkit-transform:translateZ(0)">
    <img id="foo" src="chrome-logo.png" onload="startCSS()">
    <p>Loading...</p>
</body>
</html>
